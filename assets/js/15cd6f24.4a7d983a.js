"use strict";(self.webpackChunkzio_site=self.webpackChunkzio_site||[]).push([[19184],{3905:(t,e,a)=>{a.d(e,{Zo:()=>f,kt:()=>d});var n=a(67294);function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function i(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function o(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?i(Object(a),!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function s(t,e){if(null==t)return{};var a,n,r=function(t,e){if(null==t)return{};var a,n,r={},i=Object.keys(t);for(n=0;n<i.length;n++)a=i[n],e.indexOf(a)>=0||(r[a]=t[a]);return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)a=i[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}var l=n.createContext({}),p=function(t){var e=n.useContext(l),a=e;return t&&(a="function"==typeof t?t(e):o(o({},e),t)),a},f=function(t){var e=p(t.components);return n.createElement(l.Provider,{value:e},t.children)},m="mdxType",c={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},u=n.forwardRef((function(t,e){var a=t.components,r=t.mdxType,i=t.originalType,l=t.parentName,f=s(t,["components","mdxType","originalType","parentName"]),m=p(a),u=r,d=m["".concat(l,".").concat(u)]||m[u]||c[u]||i;return a?n.createElement(d,o(o({ref:e},f),{},{components:a})):n.createElement(d,o({ref:e},f))}));function d(t,e){var a=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var i=a.length,o=new Array(i);o[0]=u;var s={};for(var l in e)hasOwnProperty.call(e,l)&&(s[l]=e[l]);s.originalType=t,s[m]="string"==typeof t?t:r,o[1]=s;for(var p=2;p<i;p++)o[p]=a[p];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},63395:(t,e,a)=>{a.r(e),a.d(e,{assets:()=>l,contentTitle:()=>o,default:()=>c,frontMatter:()=>i,metadata:()=>s,toc:()=>p});var n=a(87462),r=(a(67294),a(3905));const i={id:"partition-assignment-and-offset-retrieval",title:"Partition Assignment And Offset Retrieval"},o=void 0,s={unversionedId:"zio-kafka/partition-assignment-and-offset-retrieval",id:"zio-kafka/partition-assignment-and-offset-retrieval",title:"Partition Assignment And Offset Retrieval",description:"zio-kafka offers several ways to control which Kafka topics and partitions are assigned to your application.",source:"@site/docs/zio-kafka/partition-assignment-and-offset-retrieval.md",sourceDirName:"zio-kafka",slug:"/zio-kafka/partition-assignment-and-offset-retrieval",permalink:"/zio-kafka/partition-assignment-and-offset-retrieval",draft:!1,editUrl:"https://github.com/zio/zio/edit/series/2.x/docs/zio-kafka/partition-assignment-and-offset-retrieval.md",tags:[],version:"current",frontMatter:{id:"partition-assignment-and-offset-retrieval",title:"Partition Assignment And Offset Retrieval"},sidebar:"ecosystem-sidebar",previous:{title:"Example of Consuming, Producing and Committing Offsets",permalink:"/zio-kafka/example-of-consuming-producing-and-committing-offsets"},next:{title:"Sharing a Consumer between multiple streams",permalink:"/zio-kafka/sharing-consumer"}},l={},p=[],f={toc:p},m="wrapper";function c(t){let{components:e,...a}=t;return(0,r.kt)(m,(0,n.Z)({},f,a,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"zio-kafka")," offers several ways to control which Kafka topics and partitions are assigned to your application."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Use case"),(0,r.kt)("th",{parentName:"tr",align:null},"Method"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"One or more topics, automatic partition assignment"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},'Subscription.topics("my_topic", "other_topic")'))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Topics matching a pattern"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},'Subscription.pattern("topic.*")'))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Manual partition assignment"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},'Subscription.manual("my_topic" -> 1, "my_topic" -> 2)'))))),(0,r.kt)("p",null,"By default ",(0,r.kt)("inlineCode",{parentName:"p"},"zio-kafka")," will start streaming a partition from the last committed offset for the consumer group, or the latest message on the topic if no offset has yet been committed. You can also choose to store offsets outside of Kafka. This can be useful in cases where consistency between data stores and consumer offset is required."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Use case"),(0,r.kt)("th",{parentName:"tr",align:null},"Method"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Offsets in Kafka, start at latest message if no offset committed"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"OffsetRetrieval.Auto()"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Offsets in Kafka, start at earliest message if no offset committed"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"OffsetRetrieval.Auto(AutoOffsetStrategy.Earliest)"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Manual/external offset storage"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"Manual(getOffsets: Set[TopicPartition] => Task[Map[TopicPartition, Long]])"))))),(0,r.kt)("p",null,"For manual offset retrieval, the ",(0,r.kt)("inlineCode",{parentName:"p"},"getOffsets")," function will be called for each topic-partition that is assigned to the consumer, either via Kafka's rebalancing or via a manual assignment."))}c.isMDXComponent=!0}}]);