"use strict";(self.webpackChunkzio_site=self.webpackChunkzio_site||[]).push([[16755],{3905:(e,t,n)=>{n.d(t,{Zo:()=>m,kt:()=>y});var o=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=o.createContext({}),l=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},m=function(e){var t=l(e.components);return o.createElement(s.Provider,{value:t},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,s=e.parentName,m=c(e,["components","mdxType","originalType","parentName"]),d=l(n),u=r,y=d["".concat(s,".").concat(u)]||d[u]||p[u]||a;return n?o.createElement(y,i(i({ref:t},m),{},{components:n})):o.createElement(y,i({ref:t},m))}));function y(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=u;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c[d]="string"==typeof e?e:r,i[1]=c;for(var l=2;l<a;l++)i[l]=n[l];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}u.displayName="MDXCreateElement"},93100:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>p,frontMatter:()=>a,metadata:()=>c,toc:()=>l});var o=n(87462),r=(n(67294),n(3905));const a={},i=void 0,c={unversionedId:"ecosystem/community/tamer",id:"ecosystem/community/tamer",title:"tamer",description:"Tamer",source:"@site/docs/ecosystem/community/tamer.md",sourceDirName:"ecosystem/community",slug:"/ecosystem/community/tamer",permalink:"/ecosystem/community/tamer",draft:!1,editUrl:"https://github.com/zio/zio/edit/series/2.x/docs/ecosystem/community/tamer.md",tags:[],version:"current",frontMatter:{},sidebar:"ecosystem-sidebar",previous:{title:"Scala k8s",permalink:"/ecosystem/community/scala-k8s"},next:{title:"Tofu ZIO 2 Logging",permalink:"/ecosystem/community/tofu-zio2-logging"}},s={},l=[{value:"Tamer",id:"tamer",level:2},{value:"Introduction",id:"introduction",level:3},{value:"Installation",id:"installation",level:3},{value:"Example",id:"example",level:3}],m={toc:l},d="wrapper";function p(e){let{components:t,...n}=e;return(0,r.kt)(d,(0,o.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"tamer"},"Tamer"),(0,r.kt)("p",null," ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/laserdisc-io/tamer"},"Tamer")," is a multi-functional Kafka connector for producing data based on ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/zio/zio-kafka"},"ZIO Kafka"),"."),(0,r.kt)("h3",{id:"introduction"},"Introduction"),(0,r.kt)("p",null," Tamer is a completely customizable source connector that produces to Kafka. It ships with preconfigured modules for SQL, cloud storage and REST API, but you can provide your own functions and Tamer will take care of the rest."),(0,r.kt)("h3",{id:"installation"},"Installation"),(0,r.kt)("p",null," Depending on the source you have at hand you can add the correct dependency in your ",(0,r.kt)("inlineCode",{parentName:"p"},"build.sbt"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-scala"},'libraryDependencies += "io.laserdisc" %% "tamer-db"                % "0.16.1"\nlibraryDependencies += "io.laserdisc" %% "tamer-oci-objectstorage" % "0.16.1"\nlibraryDependencies += "io.laserdisc" %% "tamer-rest"              % "0.16.1"\nlibraryDependencies += "io.laserdisc" %% "tamer-s3"                % "0.16.1"\n')),(0,r.kt)("h3",{id:"example"},"Example"),(0,r.kt)("p",null," Let's say you have a inventory DB that's compatible with ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/tpolecat/doobie"},"Doobie"),", you can get all of your items with just a few lines of code:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-scala"},'import tamer._\nimport tamer.db._\n\nimport doobie.implicits.legacy.instant._\nimport doobie.syntax.string._\nimport zio._\nimport zio.duration._\nimport zio.json._\n\nimport java.time.Instant\n\ncase class Row(id: String, name: String, description: Option[String], modifiedAt: Instant)\n    extends tamer.db.Timestamped(modifiedAt)\n\nobject Row {\n  implicit val rowJsonCodec = DeriveJsonCodec.gen[Row]\n}\n\nobject DatabaseSimple extends zio.App {\n  // Here we\'ll go with zio-json codec, you can use avro, circe and jsoniter\n  // out-of-the box or plug yours!\n  implicit val stateKeyJsonCodec = DeriveJsonCodec.gen[tamer.Tamer.StateKey]\n  implicit val windowJsonCodec = DeriveJsonCodec.gen[tamer.db.Window]\n\n  val program: RIO[ZEnv, Unit] = tamer.db.DbSetup\n    .tumbling(window =>\n      sql"""SELECT id, name, description, modified_at \n           |FROM users \n           |WHERE modified_at > ${window.from} AND modified_at <= ${window.to}""".stripMargin\n        .query[Row]\n    )(\n      recordKey = (_, v) => v.id,\n      from = Instant.parse("2020-01-01T00:00:00.00Z"),\n      tumblingStep = 5.days\n    )\n    .runWith(dbLayerFromEnvironment ++ tamer.kafkaConfigFromEnvironment)\n\n  override final def run(args: List[String]): URIO[ZEnv, ExitCode] =\n    program.exitCode\n\n  // If you have other codecs like circe in the classpath you have to disambiguate\n  implicit lazy val stateKeyCodec: Codec[Tamer.StateKey] = Codec.optionalZioJsonCodec\n  implicit lazy val windowCodec: Codec[tamer.db.Window] = Codec.optionalZioJsonCodec\n  implicit lazy val stringCodec: Codec[String] = Codec.optionalZioJsonCodec\n}\n')),(0,r.kt)("p",null," See full example ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/laserdisc-io/tamer/blob/4e1a7646fb44041648d9aa3ba089decb81ebe487/example/src/main/scala/tamer/db/DatabaseSimple.scala"},"on the GitHub repo")))}p.isMDXComponent=!0}}]);