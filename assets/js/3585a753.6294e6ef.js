"use strict";(self.webpackChunkzio_site=self.webpackChunkzio_site||[]).push([[48849],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>d});var r=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var u=r.createContext({}),c=function(e){var t=r.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},s=function(e){var t=c(e.components);return r.createElement(u.Provider,{value:t},e.children)},p="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},f=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,u=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),p=c(n),f=o,d=p["".concat(u,".").concat(f)]||p[f]||m[f]||a;return n?r.createElement(d,i(i({ref:t},s),{},{components:n})):r.createElement(d,i({ref:t},s))}));function d(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=f;var l={};for(var u in t)hasOwnProperty.call(t,u)&&(l[u]=t[u]);l.originalType=e,l[p]="string"==typeof e?e:o,i[1]=l;for(var c=2;c<a;c++)i[c]=n[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}f.displayName="MDXCreateElement"},42011:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>i,default:()=>m,frontMatter:()=>a,metadata:()=>l,toc:()=>c});var r=n(87462),o=(n(67294),n(3905));const a={id:"running-effects",title:"Running Effects"},i=void 0,l={unversionedId:"overview/running-effects",id:"overview/running-effects",title:"Running Effects",description:"ZIO effects are precise plans that describe a computation or interaction. Ultimately, every effect must be executed by the ZIO runtime.",source:"@site/docs/overview/running-effects.md",sourceDirName:"overview",slug:"/overview/running-effects",permalink:"/overview/running-effects",draft:!1,editUrl:"https://github.com/zio/zio/edit/series/2.x/docs/overview/running-effects.md",tags:[],version:"current",frontMatter:{id:"running-effects",title:"Running Effects"},sidebar:"overview_sidebar",previous:{title:"Basic Concurrency",permalink:"/overview/basic-concurrency"},next:{title:"Performance",permalink:"/overview/performance"}},u={},c=[{value:"App",id:"app",level:2},{value:"Default Runtime",id:"default-runtime",level:2},{value:"Custom Runtime",id:"custom-runtime",level:2},{value:"Error Reporting",id:"error-reporting",level:2},{value:"Next Steps",id:"next-steps",level:2}],s={toc:c},p="wrapper";function m(e){let{components:t,...n}=e;return(0,o.kt)(p,(0,r.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"ZIO effects are precise plans that ",(0,o.kt)("em",{parentName:"p"},"describe")," a computation or interaction. Ultimately, every effect must be ",(0,o.kt)("em",{parentName:"p"},"executed")," by the ZIO runtime."),(0,o.kt)("p",null,"In this section, you will learn about the several ways that ZIO provides for you to execute effects in your application."),(0,o.kt)("h2",{id:"app"},"App"),(0,o.kt)("p",null,"If you construct a single effect for your whole program, the most natural way to run the effect is to extend ",(0,o.kt)("inlineCode",{parentName:"p"},"ZIOAppDefault"),". "),(0,o.kt)("p",null,"This class provides Scala with a JVM-compatible main function, so it can be called from IDEs and launched from the command-line. All you have to do is implement the ",(0,o.kt)("inlineCode",{parentName:"p"},"run")," method by returning the effect to run."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-scala"},'import zio._\nimport zio.Console._\n\nobject MyApp extends ZIOAppDefault {\n\n  def run =\n    for {\n      _    <- printLine("Hello! What is your name?")\n      name <- readLine\n      _    <- printLine(s"Hello, ${name}, welcome to ZIO!")\n    } yield ()\n}\n')),(0,o.kt)("p",null,"If you are using a custom environment for your application, you will have to supply your environment to the effect (using ",(0,o.kt)("inlineCode",{parentName:"p"},"ZIO#provideEnvironment")," or, if you are using layers, ",(0,o.kt)("inlineCode",{parentName:"p"},"ZIO#provide"),") before you return it from ",(0,o.kt)("inlineCode",{parentName:"p"},"run"),". "),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"ZIOAppDefault")," does not know how to supply custom environments."),(0,o.kt)("h2",{id:"default-runtime"},"Default Runtime"),(0,o.kt)("p",null,"Most applications are not greenfield, meaning they must integrate with legacy code and procedural libraries and frameworks."),(0,o.kt)("p",null,"In these cases, a better solution for running effects is to create a ",(0,o.kt)("inlineCode",{parentName:"p"},"Runtime"),", which can be passed around and used to run effects wherever required."),(0,o.kt)("p",null,"ZIO contains a default runtime called ",(0,o.kt)("inlineCode",{parentName:"p"},"Runtime.default"),"."),(0,o.kt)("p",null,"To access it, merely use"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-scala"},"val runtime = Runtime.default\n")),(0,o.kt)("p",null,"Once you have a runtime, you can use it to execute effects:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-scala"},'Unsafe.unsafe { implicit unsafe =>\n    runtime.unsafe.run(ZIO.attempt(println("Hello World!"))).getOrThrowFiberFailure()\n}\n')),(0,o.kt)("p",null,"In addition to ",(0,o.kt)("inlineCode",{parentName:"p"},"run"),", which is for synchronous execution, there are other methods available on ",(0,o.kt)("inlineCode",{parentName:"p"},"Runtime")," that support asynchronous execution."),(0,o.kt)("h2",{id:"custom-runtime"},"Custom Runtime"),(0,o.kt)("p",null,"If you are using a custom environment for your application, you may find it useful to create a ",(0,o.kt)("inlineCode",{parentName:"p"},"Runtime")," specifically tailored for that environment."),(0,o.kt)("p",null,"A custom ",(0,o.kt)("inlineCode",{parentName:"p"},"Runtime[R]")," can be created with a ",(0,o.kt)("inlineCode",{parentName:"p"},"ZEnvironment[R]")," (which holds the context required in order to execute your effects), as well as fiber refs and runtime flags (which can generally be set to default values)."),(0,o.kt)("p",null,"For example, the following creates a ",(0,o.kt)("inlineCode",{parentName:"p"},"Runtime")," that can provide an ",(0,o.kt)("inlineCode",{parentName:"p"},"Int")," to effects :"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-scala"},"val myRuntime: Runtime[Int] = \n  Runtime(ZEnvironment[Int](42), FiberRefs.empty, RuntimeFlags.default)\n")),(0,o.kt)("h2",{id:"error-reporting"},"Error Reporting"),(0,o.kt)("p",null,"The ZIO runtime system automatically logs all errors encountered when executing your effects, so long as those errors are not handled by your ZIO code."),(0,o.kt)("p",null,"You can specify a custom logger easily using ",(0,o.kt)("em",{parentName:"p"},"ZIO Logging"),", which can intercept these logged errors and handle them as configured by your logging backend."),(0,o.kt)("h2",{id:"next-steps"},"Next Steps"),(0,o.kt)("p",null,"If you are comfortable with running effects, congratulations!"),(0,o.kt)("p",null,"You are now ready to dive into other sections on the ZIO website covering data types, use cases, and interop with other systems. "),(0,o.kt)("p",null,"Refer to the Scaladoc for detailed documentation on all the core ZIO types and methods."))}m.isMDXComponent=!0}}]);