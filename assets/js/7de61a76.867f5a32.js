"use strict";(self.webpackChunkzio_site=self.webpackChunkzio_site||[]).push([[53848],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>f});var r=t(67294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var c=r.createContext({}),l=function(e){var n=r.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},p=function(e){var n=l(e.components);return r.createElement(c.Provider,{value:n},e.children)},m="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},d=r.forwardRef((function(e,n){var t=e.components,o=e.mdxType,a=e.originalType,c=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),m=l(t),d=o,f=m["".concat(c,".").concat(d)]||m[d]||u[d]||a;return t?r.createElement(f,i(i({ref:n},p),{},{components:t})):r.createElement(f,i({ref:n},p))}));function f(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var a=t.length,i=new Array(a);i[0]=d;var s={};for(var c in n)hasOwnProperty.call(n,c)&&(s[c]=n[c]);s.originalType=e,s[m]="string"==typeof e?e:o,i[1]=s;for(var l=2;l<a;l++)i[l]=t[l];return r.createElement.apply(null,i)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"},22645:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>s,toc:()=>l});var r=t(87462),o=(t(67294),t(3905));const a={id:"performance",title:"Performance"},i=void 0,s={unversionedId:"zio-json/performance",id:"zio-json/performance",title:"Performance",description:'The following benchmarks are freely available to run on your hardware with sbt "zioJsonJVM/jmh:run -prof gc" and can be extended to include more niche libraries. We only compare zio-json against Circe and Play as they are the incumbent solutions used by most of the Scala ecosystem.',source:"@site/docs/zio-json/performance.md",sourceDirName:"zio-json",slug:"/zio-json/performance",permalink:"/zio-json/performance",draft:!1,editUrl:"https://github.com/zio/zio/edit/series/2.x/docs/zio-json/performance.md",tags:[],version:"current",frontMatter:{id:"performance",title:"Performance"},sidebar:"ecosystem-sidebar",previous:{title:"Manual Instances",permalink:"/zio-json/manual-instances"},next:{title:"Security",permalink:"/zio-json/security"}},c={},l=[{value:"Even More Performance",id:"even-more-performance",level:2}],p={toc:l},m="wrapper";function u(e){let{components:n,...t}=e;return(0,o.kt)(m,(0,r.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"The following benchmarks are freely available to run on your hardware with ",(0,o.kt)("inlineCode",{parentName:"p"},'sbt "zioJsonJVM/jmh:run -prof gc"')," and can be extended to include more niche libraries. We only compare ",(0,o.kt)("inlineCode",{parentName:"p"},"zio-json")," against Circe and Play as they are the incumbent solutions used by most of the Scala ecosystem."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"zio-json"),", when used in legacy mode (i.e. using a ",(0,o.kt)("inlineCode",{parentName:"p"},"StringReader"),"), is typically x2 faster than Circe and x5 faster than Play. When used with Loom, ",(0,o.kt)("inlineCode",{parentName:"p"},"zio-json")," has finished its work before the others even begin. The following benchmarks are therefore only for legacy mode comparisons."),(0,o.kt)("p",null,"There are two main factors to consider when comparing the performance of JSON libraries: memory usage and operations per second. We perform measurements in one thread at a time but in a real server situation, there are multiple threads each consuming resources."),(0,o.kt)("p",null,"Here are JMH benchmarks (higher ",(0,o.kt)("inlineCode",{parentName:"p"},"ops/sec")," is better, lower ",(0,o.kt)("inlineCode",{parentName:"p"},"MB/sec")," is better) on a standard Google Maps API performance-testing dataset (stressing array and number parsing). Note that a better metric for memory usage might be ",(0,o.kt)("inlineCode",{parentName:"p"},"MB")," per decode or encode, since it can be misleading to have the same ",(0,o.kt)("inlineCode",{parentName:"p"},"MB/sec")," but be processing more JSON: the library that consumes the least amount of memory is likely to have highest throughput."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"       Decoding                    | Encoding\n       ops/sec       MB/sec        | ops/sec      MB/sec\nzio    15761 \xb1 283   1633 \xb1 29     | 14289 \xb1  84  2214 \xb1 12\ncirce   8832 \xb1 269   1816 \xb1 55     | 11980 \xb1 142  2030 \xb1 24\nplay    5756 \xb1  47   2260 \xb1 19     |  6669 \xb1 160  2677 \xb1 64\n")),(0,o.kt)("p",null,"on a standard Twitter API performance-testing dataset (stressing nested case classes with lots of fields)"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"       Decoding                    | Encoding\n       ops/sec       MB/sec        | ops/sec      MB/sec\nzio    16989 \xb1 113    827 \xb1  6     | 23085 \xb1 641  1791 \xb1 50\ncirce  16010 \xb1  72   1349 \xb1  6     | 15664 \xb1 209  1627 \xb1 22\nplay    5256 \xb1 165   1231 \xb1 39     | 15580 \xb1 314  2260 \xb1 45\n")),(0,o.kt)("p",null,"on a standard GeoJSON performance-testing dataset (stressing nested sealed traits that use a discriminator)"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"       Decoding                    | Encoding\n       ops/sec       MB/sec        | ops/sec       MB/sec\nzio    17104 \xb1 155   2768 \xb1 25     | 5372 \xb1 26      817 \xb1  4\ncirce   8388 \xb1 118   2879 \xb1 41     | 4762 \xb1 47      592 \xb1  6\nplay     704 \xb1   9   3946 \xb1 55     | 2587 \xb1 24     1091 \xb1 10\n")),(0,o.kt)("p",null,"and on a standard synthetic performance-testing dataset (stressing nested recursive types)"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"       Decoding                    | Encoding\n       ops/sec       MB/sec        | ops/sec       MB/sec\nzio    59099 \xb1 1307  2108 \xb1 46     | 32048 \xb1  240  2573 \xb1 19\ncirce  19609 \xb1  370  2873 \xb1 53     | 13830 \xb1  109  1730 \xb1 14\nplay    9001 \xb1  182  3348 \xb1 67     | 14529 \xb1  200  3533 \xb1 48\n")),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"zio-json")," easily wins every benchmark except ops/sec for the Twitter test data where Circe matches ops/sec but loses heavily on memory usage. Play loses on every benchmark."),(0,o.kt)("h2",{id:"even-more-performance"},"Even More Performance"),(0,o.kt)("p",null,"If ",(0,o.kt)("inlineCode",{parentName:"p"},"zio-json")," isn't fast enough for you, then try out ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/plokhotnyuk/jsoniter-scala"},"jsoniter-scala"),"; whereas ",(0,o.kt)("inlineCode",{parentName:"p"},"zio-json")," is fully integrated into ZIO, including streams and pipeline support, jsoniter is library agnostic."),(0,o.kt)("p",null,"JSON is an inefficient transport format and everybody would benefit from a port of this library to msgpack or protobuf. For legacy services, a port supporting XML is also be possible."))}u.isMDXComponent=!0}}]);