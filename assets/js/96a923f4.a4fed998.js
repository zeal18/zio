"use strict";(self.webpackChunkzio_site=self.webpackChunkzio_site||[]).push([[52731],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>d});var r=n(67294);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var l=r.createContext({}),c=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=c(e.components);return r.createElement(l.Provider,{value:t},e.children)},u="mdxType",g={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,s=e.mdxType,a=e.originalType,l=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),u=c(n),m=s,d=u["".concat(l,".").concat(m)]||u[m]||g[m]||a;return n?r.createElement(d,i(i({ref:t},p),{},{components:n})):r.createElement(d,i({ref:t},p))}));function d(e,t){var n=arguments,s=t&&t.mdxType;if("string"==typeof e||s){var a=n.length,i=new Array(a);i[0]=m;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o[u]="string"==typeof e?e:s,i[1]=o;for(var c=2;c<a;c++)i[c]=n[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},93512:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>g,frontMatter:()=>a,metadata:()=>o,toc:()=>c});var r=n(87462),s=(n(67294),n(3905));const a={id:"annotating-tests",title:"Annotating Tests"},i=void 0,o={unversionedId:"reference/test/aspects/annotating-tests",id:"reference/test/aspects/annotating-tests",title:"Annotating Tests",description:"Measuring Execution Time",source:"@site/docs/reference/test/aspects/annotating-tests.md",sourceDirName:"reference/test/aspects",slug:"/reference/test/aspects/annotating-tests",permalink:"/reference/test/aspects/annotating-tests",draft:!1,editUrl:"https://github.com/zio/zio/edit/series/2.x/docs/reference/test/aspects/annotating-tests.md",tags:[],version:"current",frontMatter:{id:"annotating-tests",title:"Annotating Tests"},sidebar:"reference-sidebar",previous:{title:"Changing the Size of Sized Generators",permalink:"/reference/test/aspects/sized"},next:{title:"Configuring Tests",permalink:"/reference/test/aspects/configuring-tests"}},l={},c=[{value:"Measuring Execution Time",id:"measuring-execution-time",level:2},{value:"Tagging",id:"tagging",level:2}],p={toc:c},u="wrapper";function g(e){let{components:t,...n}=e;return(0,s.kt)(u,(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("h2",{id:"measuring-execution-time"},"Measuring Execution Time"),(0,s.kt)("p",null,"We can annotate the execution time of each test using the ",(0,s.kt)("inlineCode",{parentName:"p"},"timed")," test aspect:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-scala"},'import zio._\nimport zio.test.{ test, _ }\n\nsuite("a timed suite")(\n  test("A")(Live.live(ZIO.sleep(100.millis)).map(_ => assertTrue(true))),\n  test("B")(assertTrue(true)),\n  test("C")(assertTrue(true))\n) @@ TestAspect.timed\n')),(0,s.kt)("p",null,"After running the test suite, the output should be something like this:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"+ a timed suite - 178 ms (100.00%)\n  + A - 108 ms (60.95%)\n  + B - 34 ms (19.39%)\n  + C - 35 ms (19.66%)\nRan 3 tests in 346 ms: 3 succeeded, 0 ignored, 0 failed\n")),(0,s.kt)("h2",{id:"tagging"},"Tagging"),(0,s.kt)("p",null,"ZIO Test allows us to define some arbitrary tags. By labeling tests with one or more tags, we can categorize them, and then, when running tests, we can filter tests according to their tags."),(0,s.kt)("p",null,"Let's tag all slow tests and run them separately:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-scala"},'import zio._\nimport zio.test.{test, _}\n\nobject TaggedSpecsExample extends ZIOSpecDefault {\n  def spec =\n    suite("a suite containing tagged tests")(\n      test("a slow test") {\n        longRunningAssertion\n      } @@ TestAspect.tag("slow", "math"),\n      test("a simple test") {\n        assertTrue(1 + 1 == 2)\n      } @@ TestAspect.tag("math"),\n      test("another slow test") {\n        anotherLongRunningAssertion\n      } @@ TestAspect.tag("slow")\n    )\n}\n')),(0,s.kt)("p",null,"By adding the ",(0,s.kt)("inlineCode",{parentName:"p"},"-tags slow")," argument to the command line, we will only run the slow tests:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"sbt> test:runMain TaggedSpecsExample -tags slow\n")),(0,s.kt)("p",null,"The output would be:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},'[info] running (fork) TaggedSpecsExample -tags slow\n[info] + a suite containing tagged tests - tagged: "slow", "math"\n[info]   + a slow test - tagged: "slow", "math"\n[info]   + another slow test - tagged: "slow"\n[info] Ran 2 tests in 162 ms: 2 succeeded, 0 ignored, 0 failed\n[success] Total time: 1 s, completed Nov 2, 2021, 12:36:36 PM\n')))}g.isMDXComponent=!0}}]);