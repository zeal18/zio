"use strict";(self.webpackChunkzio_site=self.webpackChunkzio_site||[]).push([[5109],{3905:(e,n,t)=>{t.d(n,{Zo:()=>s,kt:()=>g});var r=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var p=r.createContext({}),c=function(e){var n=r.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},s=function(e){var n=c(e.components);return r.createElement(p.Provider,{value:n},e.children)},u="mdxType",f={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,p=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),u=c(t),m=a,g=u["".concat(p,".").concat(m)]||u[m]||f[m]||o;return t?r.createElement(g,i(i({ref:n},s),{},{components:t})):r.createElement(g,i({ref:n},s))}));function g(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,i=new Array(o);i[0]=m;var l={};for(var p in n)hasOwnProperty.call(n,p)&&(l[p]=n[p]);l.originalType=e,l[u]="string"==typeof e?e:a,i[1]=l;for(var c=2;c<o;c++)i[c]=t[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},32994:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>p,contentTitle:()=>i,default:()=>f,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var r=t(87462),a=(t(67294),t(3905));const o={id:"converting-defects-to-failures",title:"Converting Defects to Failures"},i=void 0,l={unversionedId:"reference/error-management/operations/converting-defects-to-failures",id:"reference/error-management/operations/converting-defects-to-failures",title:"Converting Defects to Failures",description:"Both ZIO#resurrect and ZIO#absorb are symmetrical opposite of the ZIO#orDie operator. The ZIO#orDie takes failures from the error channel and converts them into defects, whereas the ZIO#absorb and ZIO#resurrect take defects and convert them into failures:",source:"@site/docs/reference/error-management/operations/converting-defects-to-failures.md",sourceDirName:"reference/error-management/operations",slug:"/reference/error-management/operations/converting-defects-to-failures",permalink:"/reference/error-management/operations/converting-defects-to-failures",draft:!1,editUrl:"https://github.com/zio/zio/edit/series/2.x/docs/reference/error-management/operations/converting-defects-to-failures.md",tags:[],version:"current",frontMatter:{id:"converting-defects-to-failures",title:"Converting Defects to Failures"},sidebar:"reference-sidebar",previous:{title:"Exposing the Cause in The Success Channel",permalink:"/reference/error-management/operations/exposing-the-cause-in-the-success-channel"},next:{title:"Error Refinement",permalink:"/reference/error-management/operations/error-refinement"}},p={},c=[],s={toc:c},u="wrapper";function f(e){let{components:n,...t}=e;return(0,a.kt)(u,(0,r.Z)({},s,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Both ",(0,a.kt)("inlineCode",{parentName:"p"},"ZIO#resurrect")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"ZIO#absorb")," are symmetrical opposite of the ",(0,a.kt)("inlineCode",{parentName:"p"},"ZIO#orDie")," operator. The ",(0,a.kt)("inlineCode",{parentName:"p"},"ZIO#orDie")," takes failures from the error channel and converts them into defects, whereas the ",(0,a.kt)("inlineCode",{parentName:"p"},"ZIO#absorb")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"ZIO#resurrect")," take defects and convert them into failures:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-scala"},"trait ZIO[-R, +E, +A] {\n  def absorb(implicit ev: E IsSubtypeOfError Throwable): ZIO[R, Throwable, A]\n  def absorbWith(f: E => Throwable): ZIO[R, Throwable, A]\n  def resurrect(implicit ev1: E IsSubtypeOfError Throwable): ZIO[R, Throwable, A]\n}\n")),(0,a.kt)("p",null,"Below are examples of the ",(0,a.kt)("inlineCode",{parentName:"p"},"ZIO#absorb")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"ZIO#resurrect")," operators:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-scala"},'import zio._\n\nval effect1 =\n  ZIO.fail(new IllegalArgumentException("wrong argument"))  // ZIO[Any, IllegalArgumentException, Nothing]\n    .orDie                                                  // ZIO[Any, Nothing, Nothing]\n    .absorb                                                 // ZIO[Any, Throwable, Nothing]\n    .refineToOrDie[IllegalArgumentException]                // ZIO[Any, IllegalArgumentException, Nothing]                // ZIO[Any, IllegalArgumentException, Nothing]\n\nval effect2 =\n  ZIO.fail(new IllegalArgumentException("wrong argument"))  // ZIO[Any, IllegalArgumentException , Nothing]\n    .orDie                                                  // ZIO[Any, Nothing, Nothing]\n    .resurrect                                              // ZIO[Any, Throwable, Nothing]\n    .refineToOrDie[IllegalArgumentException]                // ZIO[Any, IllegalArgumentException, Nothing]\n')),(0,a.kt)("p",null,"So what is the difference between ",(0,a.kt)("inlineCode",{parentName:"p"},"ZIO#absorb")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"ZIO#resurrect")," operators?"),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"ZIO#absorb")," can recover from both ",(0,a.kt)("inlineCode",{parentName:"p"},"Die")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"Interruption")," causes. Using this operator we can absorb failures, defects and interruptions using ",(0,a.kt)("inlineCode",{parentName:"p"},"ZIO#absorb")," operation. It attempts to convert all causes into a failure, throwing away all information about the cause of the error:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-scala"},'import zio._\n\nobject MainApp extends ZIOAppDefault {\n  val effect1 =\n    ZIO.dieMessage("Boom!") // ZIO[Any, Nothing, Nothing]\n      .absorb               // ZIO[Any, Throwable, Nothing]\n      .ignore\n  val effect2 =\n    ZIO.interrupt           // ZIO[Any, Nothing, Nothing]\n      .absorb               // ZIO[Any, Throwable, Nothing]\n      .ignore\n\n  def run =\n    (effect1 <*> effect2)\n      .debug("application exited successfully")\n}\n')),(0,a.kt)("p",null,"The output would be as below:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-scala"},"application exited successfully: ()\n")),(0,a.kt)("p",null,"Whereas, the ",(0,a.kt)("inlineCode",{parentName:"p"},"ZIO#resurrect")," will only recover from ",(0,a.kt)("inlineCode",{parentName:"p"},"Die")," causes:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-scala"},'import zio._\n\nobject MainApp extends ZIOAppDefault {\n  val effect1 =\n    ZIO\n      .dieMessage("Boom!") // ZIO[Any, Nothing, Nothing]\n      .resurrect           // ZIO[Any, Throwable, Nothing]\n      .ignore\n  val effect2 =\n    ZIO.interrupt          // ZIO[Any, Nothing, Nothing]\n      .resurrect           // ZIO[Any, Throwable, Nothing]\n      .ignore\n\n  def run =\n    (effect1 <*> effect2)\n      .debug("couldn\'t recover from fiber interruption")\n}\n')),(0,a.kt)("p",null,"And, here is the output:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-scala"},'timestamp=2022-02-18T14:21:52.559872464Z level=ERROR thread=#zio-fiber-0 message="Exception in thread "zio-fiber-2" java.lang.InterruptedException: Interrupted by thread "zio-fiber-"\n    at <empty>.MainApp.effect2(MainApp.scala:10)\n    at <empty>.MainApp.effect2(MainApp.scala:11)\n    at <empty>.MainApp.effect2(MainApp.scala:12)\n    at <empty>.MainApp.run(MainApp.scala:15)\n    at <empty>.MainApp.run(MainApp.scala:16)"\n')))}f.isMDXComponent=!0}}]);