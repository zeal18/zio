"use strict";(self.webpackChunkzio_site=self.webpackChunkzio_site||[]).push([[23141],{3905:(e,n,t)=>{t.d(n,{Zo:()=>h,kt:()=>m});var a=t(67294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var c=a.createContext({}),s=function(e){var n=a.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},h=function(e){var n=s(e.components);return a.createElement(c.Provider,{value:n},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},d=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,l=e.originalType,c=e.parentName,h=i(e,["components","mdxType","originalType","parentName"]),p=s(t),d=r,m=p["".concat(c,".").concat(d)]||p[d]||u[d]||l;return t?a.createElement(m,o(o({ref:n},h),{},{components:t})):a.createElement(m,o({ref:n},h))}));function m(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var l=t.length,o=new Array(l);o[0]=d;var i={};for(var c in n)hasOwnProperty.call(n,c)&&(i[c]=n[c]);i.originalType=e,i[p]="string"==typeof e?e:r,o[1]=i;for(var s=2;s<l;s++)o[s]=t[s];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},98514:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>u,frontMatter:()=>l,metadata:()=>i,toc:()=>s});var a=t(87462),r=(t(67294),t(3905));const l={id:"creating-channels",title:"Creating Channels"},o=void 0,i={unversionedId:"reference/stream/zchannel/creating-channels",id:"reference/stream/zchannel/creating-channels",title:"Creating Channels",description:"ZChannel have several constructors and also built-in channels, where suitable to create more complex channels.",source:"@site/docs/reference/stream/zchannel/creating-channels.md",sourceDirName:"reference/stream/zchannel",slug:"/reference/stream/zchannel/creating-channels",permalink:"/reference/stream/zchannel/creating-channels",draft:!1,editUrl:"https://github.com/zio/zio/edit/series/2.x/docs/reference/stream/zchannel/creating-channels.md",tags:[],version:"current",frontMatter:{id:"creating-channels",title:"Creating Channels"},sidebar:"reference-sidebar",previous:{title:"Introduction To ZChannels",permalink:"/reference/stream/zchannel/"},next:{title:"Composing Channels",permalink:"/reference/stream/zchannel/composing-channels"}},c={},s=[{value:"<code>ZChannel.succeed</code>",id:"zchannelsucceed",level:2},{value:"<code>ZChannel.fail</code>",id:"zchannelfail",level:2},{value:"<code>ZChannel.write*</code>",id:"zchannelwrite",level:2},{value:"<code>ZChannel.read*</code>",id:"zchannelread",level:2}],h={toc:s},p="wrapper";function u(e){let{components:n,...t}=e;return(0,r.kt)(p,(0,a.Z)({},h,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"ZChannel")," have several constructors and also built-in channels, where suitable to create more complex channels."),(0,r.kt)("p",null,"Without further ado, let's learn them one by one:"),(0,r.kt)("h2",{id:"zchannelsucceed"},(0,r.kt)("inlineCode",{parentName:"h2"},"ZChannel.succeed")),(0,r.kt)("p",null,"Creates a channel that succeeds with a given done value, e.g. ",(0,r.kt)("inlineCode",{parentName:"p"},"ZChannel.succeed(42)"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-scala"},"import zio.stream._\n\nval channel: ZChannel[Any, Any, Any, Any, Nothing, Nothing, Int] = \n  ZChannel.succeed(42)\n")),(0,r.kt)("p",null,"This channel doesn't produce any data but succeeds with a done value of type ",(0,r.kt)("inlineCode",{parentName:"p"},"Int"),". Let's try to ",(0,r.kt)("inlineCode",{parentName:"p"},"runCollect")," this channel and see what happens:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-scala"},"channel.runCollect.debug\n")),(0,r.kt)("p",null,"The output of the ",(0,r.kt)("inlineCode",{parentName:"p"},"runCollect")," operation is a tuple of two elements: the first is a chunk of data that the channel produced, and the second is the done value. Because this channel doesn't produce any data, the first element is an empty chunk, but it has a 42 as the done value in the second element."),(0,r.kt)("h2",{id:"zchannelfail"},(0,r.kt)("inlineCode",{parentName:"h2"},"ZChannel.fail")),(0,r.kt)("p",null,"Creates a channel that fails with a given error, e.g. ",(0,r.kt)("inlineCode",{parentName:"p"},'ZChannel.fail(new Exception("error"))'),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-scala"},'import java.io.IOException\nimport zio.stream._\n\nval channel: ZChannel[Any, Any, Any, Any, Exception, Nothing, Nothing] = \n  ZChannel.fail(new Exception("error"))\n')),(0,r.kt)("h2",{id:"zchannelwrite"},(0,r.kt)("inlineCode",{parentName:"h2"},"ZChannel.write*")),(0,r.kt)("p",null,"Create a channel that writes given elements to the output port:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-scala"},"import zio._\nimport zio.stream._\n\nZChannel.write(1).runCollect.debug\n// Output: (Chunk(1),()) \n\nZChannel.writeAll(1, 2, 3).runCollect.debug\n// Output: (Chunk(1,2,3),()) \n\nZChannel.writeChunk(Chunk(1, 2, 3)).runCollect.debug\n")),(0,r.kt)("h2",{id:"zchannelread"},(0,r.kt)("inlineCode",{parentName:"h2"},"ZChannel.read*")),(0,r.kt)("p",null,"Create a channel that reads elements from the input port and returns that as a done value:"),(0,r.kt)("p",null,"Let's start with the simplest read operation, ",(0,r.kt)("inlineCode",{parentName:"p"},"ZChannel.read"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-scala"},"import zio.stream._\n\nval read: ZChannel[Any, Any, Int, Any, None.type, Nothing, Int] = \n  ZChannel.read[Int]\n")),(0,r.kt)("p",null,"To test this channel, we can create a writer channel and then pipe that to the reader channel:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-scala"},"import zio.stream._\n\nval read = ZChannel.read[Int]  \n\n(ZChannel.write(1) >>> read).runCollect.debug\n")),(0,r.kt)("p",null,"In the above example, the writer channel writes the value 1 to the output port, and the reader channel reads the value from the input port and then returns it as a done value."),(0,r.kt)("p",null,"If we compose multiple read operations, we can read more values from the input port:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-scala"},"import zio.stream._\n\nval read = ZChannel.read[Int]  \n\n(ZChannel.writeAll(1, 2, 3) >>> (read *> read)).runCollect.debug\n// Output: (Chunk(),2) \n\n(ZChannel.writeAll(1, 2, 3) >>> (read *> read *> read)).runCollect.debug\n")),(0,r.kt)("p",null,"Another useful read operation is ",(0,r.kt)("inlineCode",{parentName:"p"},"ZChannel.readWith"),". Using this operator, after reading a value from the input port, instead of returning it as a done value, we have the ability to pass the input value to another channel."))}u.isMDXComponent=!0}}]);