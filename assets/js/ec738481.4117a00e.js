"use strict";(self.webpackChunkzio_site=self.webpackChunkzio_site||[]).push([[47319],{3905:(e,t,n)=>{n.d(t,{Zo:()=>l,kt:()=>d});var o=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var p=o.createContext({}),c=function(e){var t=o.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},l=function(e){var t=c(e.components);return o.createElement(p.Provider,{value:t},e.children)},m="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},h=o.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,p=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),m=c(n),h=i,d=m["".concat(p,".").concat(h)]||m[h]||u[h]||r;return n?o.createElement(d,a(a({ref:t},l),{},{components:n})):o.createElement(d,a({ref:t},l))}));function d(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,a=new Array(r);a[0]=h;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=e,s[m]="string"==typeof e?e:i,a[1]=s;for(var c=2;c<r;c++)a[c]=n[c];return o.createElement.apply(null,a)}return o.createElement.apply(null,n)}h.displayName="MDXCreateElement"},15194:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>a,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>c});var o=n(87462),i=(n(67294),n(3905));const r={id:"composing-optics",title:"Composing Optics"},a=void 0,s={unversionedId:"zio-optics/composing-optics",id:"zio-optics/composing-optics",title:"Composing Optics",description:"One of the great features of optics is that they compose.",source:"@site/docs/zio-optics/composing-optics.md",sourceDirName:"zio-optics",slug:"/zio-optics/composing-optics",permalink:"/zio-optics/composing-optics",draft:!1,editUrl:"https://github.com/zio/zio/edit/series/2.x/docs/zio-optics/composing-optics.md",tags:[],version:"current",frontMatter:{id:"composing-optics",title:"Composing Optics"},sidebar:"ecosystem-sidebar",previous:{title:"Constructing Optics",permalink:"/zio-optics/constructing-optics"},next:{title:"Using Optics",permalink:"/zio-optics/using-optics"}},p={},c=[],l={toc:c},m="wrapper";function u(e){let{components:t,...n}=e;return(0,i.kt)(m,(0,o.Z)({},l,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"One of the great features of optics is that they compose."),(0,i.kt)("p",null,"If we have an optic that accesses a part ",(0,i.kt)("inlineCode",{parentName:"p"},"Piece")," of a larger structure ",(0,i.kt)("inlineCode",{parentName:"p"},"Whole")," and another optic that accesses a part ",(0,i.kt)("inlineCode",{parentName:"p"},"Piece2")," of ",(0,i.kt)("inlineCode",{parentName:"p"},"Piece")," we can combine them to create an optic that accesses the part ",(0,i.kt)("inlineCode",{parentName:"p"},"Piece2")," of the original structure ",(0,i.kt)("inlineCode",{parentName:"p"},"Whole"),". We do this using the ",(0,i.kt)("inlineCode",{parentName:"p"},">>>")," operator or its named alias ",(0,i.kt)("inlineCode",{parentName:"p"},"andThen"),"."),(0,i.kt)("p",null,"For example, say we have an ",(0,i.kt)("inlineCode",{parentName:"p"},"Either[String, Person]")," representing either a person or a failure message indicating why the person does not exist. We would like to modify the age of the person, if it exists."),(0,i.kt)("p",null,"Rather than having to define a new optic for this, we can combine the existing ",(0,i.kt)("inlineCode",{parentName:"p"},"right")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"age")," optics. The ",(0,i.kt)("inlineCode",{parentName:"p"},"right"),' optic will first "zoom in" to the ',(0,i.kt)("inlineCode",{parentName:"p"},"Person")," on the right side of the either and then the ",(0,i.kt)("inlineCode",{parentName:"p"},"age")," optic will further zoom in to the age field within the person."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-scala"},"import zio._\nimport zio.optics._\n\ncase class Person(name: String, age: Int)\n\nobject Person {\n  val age: Lens[Person, Int] =\n    Lens(\n      person => Right(person.age),\n      age => person => Right(person.copy(age = age))\n    )\n}\n\nval optic: Optional[Either[String, Person], Int] =\n  Optic.right >>> Person.age\n")),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},">>>")," operator will automatically take care of composing the optics together for us, returning the most specific optic possible given the two optics that we are combining."),(0,i.kt)("p",null,"Sometimes instead of directly accessing part of the value accessed by the first optic like this we would like to access each value within a collection accessed by the first optic."),(0,i.kt)("p",null,"For example, if we have an optic that returns a ",(0,i.kt)("inlineCode",{parentName:"p"},"Chunk[Person]")," we may want to modify a field in every ",(0,i.kt)("inlineCode",{parentName:"p"},"Person")," returned by the first optic instead of modifying the ",(0,i.kt)("inlineCode",{parentName:"p"},"Chunk[Person]")," itself. We can do this using the ",(0,i.kt)("inlineCode",{parentName:"p"},"foreach")," operator."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-scala"},"def hasJanuaryBirthday(person: Person): Boolean =\n  ???\n\nval januaryAges: Traversal[Chunk[Person], Int] =\n  Optic.filter(hasJanuaryBirthday).foreach(Person.age)\n")))}u.isMDXComponent=!0}}]);